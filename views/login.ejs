<form class="p-4" method="POST" action="/login">
  <h1 class="h3 text-white mb-3 fw-normal">Please sign In</h1>

  <div class="form-floating mb-3">
    <input
      type="text"
      class="form-control"
      id="floatingInput"
      placeholder="name@example.com"
      name="username"
    required
    />
    <label for="floatingInput">Email Username</label>
  </div>
  <div class="form-floating mb-3">
    <input
      type="password"
      class="form-control"
      id="floatingPassword"
      placeholder="Password"
      name="password"
    required
    />
    <label for="floatingPassword">Password</label>
  </div>
  </div>
  <button class="btn btn-primary w-100 py-2" type="submit">Sign In</button>
</form>
    <script>
      const form = document.querySelector("form")
      form.addEventListener("submit", async function (e) {
        e.preventDefault()
        const formData = {
          username: form.username.value,
          password: form.password.value,
        }

        fetch("/login", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(formData),
        })
          .then(async (response) => {
            if (response.redirected) {
              window.location.href = response.url
            }
          })
          .catch((error) => {
            console.error("Error:", error)
          })
      })
    </script>